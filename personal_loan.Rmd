---
title: "Personal Loan - Assignment 1"
author: "sidharth Khatua"
date: "1 June 2018"
output: html_document
---

```{r,warning=FALSE,message=FALSE}
library(ggplot2)
library(Amelia)
library(caret)
library(dplyr)
library(rpart)
library(rpart.plot)
library(readxl)
library(data.table)
```

Background:								
A relatively young bank is growing rapidly in terms of overall customer acquisition.Majority of these are Liability customers with varying sizes of relationship with the bank.The customer base of Asset customers is quite small, and the bank WANTS to grow this base rapidly to bring in more loan business. 								
									
Specifically, it wants to explore ways of converting its liability customers to Personal Loan customers.								
									
A campaign the bank ran for liability customers last year showed a healthy conversion rate of over 9% successes. This has encouraged the Retail Marketing department to devise smarter campaigns with better target marketing.								
									
	Analytics Objectives:								
									
1	While designing a new campaign, can we model the previous campaign's customer behavior to analyze what combination of parameters make a customer more likely to accept a personal loan?								
									
2	There are several special products / facilities the bank offers like CD and security accounts, 								
	online services, credit cards, etc. Can we spot any association among these for finding cross-selling opportunities?								


```{r}
#Import from Excel file
personal_loan <- read_excel(file.choose(),sheet = 2)

#Structue
dim(personal_loan)
glimpse(personal_loan)

#Redining the column variables.
names(personal_loan) <- tolower(names(personal_loan))

```
observation:
5000 rows and 14 variables.
ID and Zip code are unique variables.
```{r}
prop.table(table(personal_loan$`personal loan`))
#90.4% 0
#9.6% 1
```
```{r}
personal_loan <- personal_loan %>% 
  mutate(education=as.factor(education),
         `personal loan`=as.factor(`personal loan`),
         `securities account`=as.factor(`securities account`),
         `cd account`=as.factor(`cd account`),
         online=as.factor(online),
         creditcard=as.factor(creditcard))

#EDA Analysis:

a <- ggplot(personal_loan,aes(age))+geom_histogram(fill='orange',color='black')+ggtitle('Age')

b <- ggplot(personal_loan,aes(experience))+geom_histogram(color='black',fill='orange')+ggtitle('Experience')

c <- ggplot(personal_loan,aes(income))+geom_histogram(color='black',fill='orange')+ggtitle('Income')#right sckewed

d <- ggplot(personal_loan,aes(ccavg))+geom_histogram(color='black',fill='orange')+ggtitle('Ccavg')

e <- ggplot(personal_loan,aes(mortgage))+geom_histogram(color='black',fill='orange')+ggtitle('Mortgage')

library(gridExtra)
library(plotly)
grid.arrange(a,b,c,d,e,ncol=3)
```
Observation:
Age is highly concentrate btw 35 years to 60 years.
Income is Sckewed towards right with mean of approx 50
Avg spending on Credit cards is also sckewed towards right which a mean spending of 1.
Most of the people have opted 0 morgage while purchasing the house.
```{r}
ggplot(personal_loan %>% group_by(family) %>% summarise(Count=n()))+
  geom_bar(aes(family,Count),stat = 'identity',fill='red')+geom_label(aes(family,Count,label=Count))+ggtitle('Family')

ggplot(personal_loan %>% group_by(`personal loan`) %>% summarise(Count=n()))+
  geom_bar(aes(`personal loan`,Count),stat = 'identity',fill='red')+geom_label(aes(`personal loan`,Count,label=Count))+ggtitle('Personal loan-Target variable')

ggplot(personal_loan %>% group_by(`securities account`) %>% summarise(Count=n()))+
  geom_bar(aes(`securities account`,Count),stat = 'identity',fill='red')+geom_label(aes(`securities account`,Count,label=Count))+ggtitle('Security Deposit')

ggplot(personal_loan %>% group_by(family) %>% summarise(Count=n()))+
  geom_bar(aes(family,Count),stat = 'identity',fill='red')+geom_label(aes(family,Count,label=Count))+ggtitle('Family')

```


